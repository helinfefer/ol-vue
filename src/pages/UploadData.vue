<template>
    <el-container>
      <!-- å¤´éƒ¨åŒºåŸŸ -->
      <el-header>
          <!-- æŸ¥è¯¢ -->
        <el-input
          placeholder="Search"
          prefix-icon="el-icon-search"
          v-model="searchQuery">
        </el-input>
      </el-header>
      <el-form 
        ref="form" 
        :model="form" 
        label-width="150px" 
        class="scenario-form">

        <h2>General Uploads</h2>
        <el-form-item label="å°±ä¸šæ§åˆ¶æ€»é‡:">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/employControl"
                multiple
                :on-preview="handlePreview"
                :on-remove="handleRemove"
                :before-remove="beforeRemove"
                :file-list="uploadJobControlFileList"
                :on-success="uploadJobControlFileSuccess"
                accept=".csv"
                >
                <el-button slot="trigger" size="small" type="primary" >é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          
          <el-form-item label="å®¶åº­æ§åˆ¶æ€»é‡:" >
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/householdControl"
                multiple
                :limit="3"
                accept=".csv"
                :file-list="uploadHouseholdControlFileList"
                :on-success="uploadHouseholdControlFileSuccess"
                >
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>
          
          <el-form-item label="æ¨¡å‹åŸºç¡€æ•°æ®:">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_geo_data/basedata"
                multiple
                :on-preview="handlePreview"
                :on-remove="handleRemove"
                :before-remove="beforeRemove"
                :file-list="uploadBaseDataFileList"
                :on-success="uploadBaseDataFileSuccess"
                accept=".geojson"
                >
                <el-button slot="trigger" size="small" type="primary" >é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

<!-- 
          <el-form-item label="Zoning:" >
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/householdControl"
                accept=".csv"
                :on-success="handleSuccess"
                :on-error="handleError"     
                >
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

        <h2>Travel Model and Network Data</h2>
        <el-form-item label="äº¤é€šæ¨¡å‹ç½‘ç»œ">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/travelNetworks"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="äº¤é€šæ¨¡å‹é˜»æŠ—skims">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="äº¤é€šæ¨¡å‹åˆ†åŒº">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <h2>Model Base Data</h2>

          <el-form-item label="Parcel Geometry">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          
          <el-form-item label="Parcel Attributes">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>
          
          <el-form-item label="Buildings">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="Building Types">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="HouseHolds">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="Persons">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="Jobs">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item>

          <el-form-item label="Jobs Sectors">
            <el-upload
                class="upload-demo"
                action="http://localhost:5000/upload_data/skims"
                multiple
                :limit="3"
                :file-list="fileList">
                <el-button slot="trigger" size="small" type="primary">é€‰å–æ–‡ä»¶</el-button>
            </el-upload>
          </el-form-item> -->
        </el-form>  

        <DataListComponent></DataListComponent>
    </el-container>
  </template>


<script>
import DataListComponent from '../components/DataListComponent.vue'
export default {
    data(){
        return{
          uploadJobControlFileList:[],
          uploadHouseholdControlFileList:[],
          uploadBaseDataFileList:[],
          form:{
            },
            searchQuery:null,
        }
    },
    components:{DataListComponent},
    name:"UploadData",
    methods: {
          handleRemove(file, fileList) {
            console.log(file, fileList);
          },
          handlePreview(file) {
            console.log(file);
          },
          handleExceed(files, fileList) {
            this.$message.warning(`å½“å‰é™åˆ¶é€‰æ‹© 3 ä¸ªæ–‡ä»¶ï¼Œæœ¬æ¬¡é€‰æ‹©äº† ${files.length} ä¸ªæ–‡ä»¶ï¼Œå…±é€‰æ‹©äº† ${files.length + fileList.length} ä¸ªæ–‡ä»¶`);
          },
          beforeRemove(file) {
            return this.$confirm(`ç¡®å®šç§»é™¤ ${ file.name }ï¼Ÿ`);
          },

        uploadJobControlFileSuccess(file,fileList){
          // dispatch
          console.log('*************ADDJOBFILE',file,'*************',fileList)
          this.$store.dispatch('add_job_control_file',fileList)
          // this.$store.commit('ADDFILE', this.uploadJobControlFileList)
          console.log("ğŸš€ ~ file: UploadData.vue:245 ~ uploadJobControlFileSuccess ~ localStorage:", fileList)
        },
        uploadHouseholdControlFileSuccess(file,fileList){
          // dispatch
          console.log('*************ADDHouseholdFILE',file,'*************',fileList)
          this.$store.dispatch('add_household_control_file',fileList)
          // this.$store.commit('ADDFILE', this.uploadJobControlFileList)

        },

        uploadBaseDataFileSuccess(file,fileList) {
          // ä¸»è¦æ˜¯åŸºç¡€åœ°ç†æ•°æ®çš„å¤„ç†
          console.log("ğŸš€ ~ file: UploadData.vue:253 ~ uploadBaseDataFileSuccess ~ add_base_data_file:", file)
          console.log("ğŸš€ ~ file: UploadData.vue:259 ~ uploadBaseDataFileSuccess ~ fileList:", fileList)
          this.$store.dispatch('add_base_data_file',fileList)
        }
    },
    mounted() {
  }
};
</script>


<style scoped>

/* ä¿æŒä¸å…¶ä»–è¡¨å•é¡¹æ ‡ç­¾çš„ä¸€è‡´æ€§ */
.el-form-item__label {
  float: left;
  font-size: 14px; /* è°ƒæ•´å­—ä½“å¤§å° */
  color: #606266; /* è°ƒæ•´å­—ä½“é¢œè‰² */
  line-height: 30px; /* è°ƒæ•´è¡Œé«˜ */
  margin-right: 12px; /* æ ‡ç­¾ä¸è¾“å…¥æ¡†çš„é—´è· */
}

/* å…¶ä»–æ ·å¼è°ƒæ•´ */
</style>